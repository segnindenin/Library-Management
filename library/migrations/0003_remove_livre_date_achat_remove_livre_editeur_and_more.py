# Generated by Django 5.1.4 on 2025-01-07 11:36

import django.core.validators
import django.db.models.deletion
import django.utils.timezone
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('library', '0002_alter_emprunt_livres_alter_livre_auteur_and_more'),
    ]

    operations = [
        migrations.RemoveField(
            model_name='livre',
            name='date_achat',
        ),
        migrations.RemoveField(
            model_name='livre',
            name='editeur',
        ),
        migrations.RemoveField(
            model_name='livre',
            name='fournisseur',
        ),
        migrations.RemoveField(
            model_name='livre',
            name='prix_achat',
        ),
        migrations.RemoveField(
            model_name='livre',
            name='quantite',
        ),
        migrations.AddField(
            model_name='client',
            name='nbre_livre_emprunte',
            field=models.PositiveIntegerField(default=0),
        ),
        migrations.AlterField(
            model_name='client',
            name='telephone',
            field=models.CharField(max_length=10, validators=[django.core.validators.RegexValidator(message='Ce champ doit contenir uniquement des chiffres.', regex='^\\d+$')]),
        ),
        migrations.AlterField(
            model_name='emprunt',
            name='livres',
            field=models.ManyToManyField(related_name='LivreEmprunt', to='library.livre'),
        ),
        migrations.CreateModel(
            name='Achats',
            fields=[
                ('id_achat', models.AutoField(primary_key=True, serialize=False)),
                ('date_achat', models.DateField(default=django.utils.timezone.now)),
                ('prix_achat', models.DecimalField(decimal_places=2, max_digits=10)),
                ('quantite', models.PositiveIntegerField()),
                ('editeur', models.CharField(max_length=255)),
                ('fournisseur', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='achats', to='library.fournisseur')),
                ('isbn_livre', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='achats', to='library.livre')),
            ],
        ),
        migrations.CreateModel(
            name='LivreEmprunt',
            fields=[
                ('id_livre_emprunt', models.AutoField(primary_key=True, serialize=False)),
                ('date_retour_effectif', models.DateField(blank=True, null=True)),
                ('condition', models.CharField(choices=[('bonne', 'Bonne'), ('mauvaise', 'Mauvaise')], max_length=20)),
                ('id_emprunt', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='EmpruntLivre', to='library.emprunt')),
                ('isbn_livre', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='EmpruntLivre', to='library.livre')),
            ],
        ),
    ]
